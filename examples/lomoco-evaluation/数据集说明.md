# LOCOMO 数据集说明

## 概述

本项目已生成完整的 LOCOMO 数据集，包含 10 个丰富的对话场景，总计 38 个问答对，涵盖多种生活、工作和学习情境。

## 数据集文件

### 1. `dataset/locomo10.json` - 原始格式
- **格式**: 每个对话包含 `conversation` 和 `qa` 字段
- **数据量**: 10 个对话
- **问答总数**: 38 个问答对
- **用途**: 适用于 mem0、zep、openai、cortex_mem 等技术测试

### 2. `dataset/locomo10_rag.json` - RAG 格式
- **格式**: 每个条目包含 `conversation`、`question`、`answer`、`category` 字段
- **数据量**: 14 个条目
- **用途**: 适用于 RAG 和 LangMem 技术测试

## 对话场景覆盖

### 生活场景
- **户外活动**: Alice & Bob 的黄石公园徒步之旅
- **宠物收养**: Lisa & Tom 讨论收养金毛犬 Buddy
- **旅行计划**: Diana & Robert 的巴塞罗那学习之旅
- **婚礼准备**: Maria & Carlos 的婚礼筹备过程

### 职业发展
- **工作变动**: Sarah & Mike 的新工作面试和入职
- **教育进步**: Kevin & Rachel 的硕士学位完成和谷歌工作机会
- **创业梦想**: Alex & Sophie 的烘焙店创业计划
- **医学梦想**: Jennifer & Mark 的医学院录取

### 专业发展
- **面试准备**: Emma & David 的营销经理面试和成功
- **内容创作**: Hannah & Tyler 的环保播客启动

## 问答分类

### 类别 1: 事实性问题
- 地点信息 (如: "Bob 在哪里徒步？")
- 人员信息 (如: "Mike 将使用什么编程语言？")
- 物品信息 (如: "Alex 的烘焙店叫什么名字？")
- 详细信息 (如: "Kevin 的论文主题是什么？")

### 类别 2: 关系理解
- 情感反应 (如: "Bob 提到间歇泉时 Alice 的反应？")
- 态度表达 (如: "David 对 Emma 面试的鼓励？")

### 类别 3: 时间相关
- 具体日期 (如: "Mike 什么时候开始新工作？")
- 时间长度 (如: "Kevin 的硕士学位读了多久？")
- 时序安排 (如: "Emma 应该几点离开去面试？")

## 数据特点

### 丰富性
- **多样化场景**: 工作、学习、生活、兴趣等多个领域
- **多轮对话**: 每个场景包含 2-3 轮对话历史
- **真实细节**: 包含具体的时间、地点、数字、人物关系

### 挑战性
- **时间跨度**: 对话跨越数周到数月
- **信息密度**: 重要信息分散在多轮对话中
- **上下文依赖**: 需要根据对话历史回答问题

### 评估价值
- **记忆检索**: 测试系统回忆特定信息的能力
- **时间理解**: 评估对时间相关信息的处理
- **关系推理**: 检验对人物关系和情感的理解

## 使用方法

### 验证数据集
```bash
python verify_datasets.py
```

### 运行 cortex-mem 评估
```bash
# 1. 添加记忆
python run_experiments.py --technique_type cortex_mem --method add

# 2. 搜索记忆并回答问题
python run_experiments.py --technique_type cortex_mem --method search

# 3. 运行评估
python evals.py --input_file results/cortex_mem_results.json --output_file results/cortex_mem_evaluated.json

# 4. 生成评分报告
python generate_scores.py
```

### 其他技术测试
```bash
# Mem0 评估
python run_experiments.py --technique_type mem0 --method add
python run_experiments.py --technique_type mem0 --method search

# RAG 评估
python run_experiments.py --technique_type rag --method search

# LangMem 评估
python run_experiments.py --technique_type langmem --method search

# Zep 评估
python run_experiments.py --technique_type zep --method add
python run_experiments.py --technique_type zep --method search

# OpenAI 评估
python run_experiments.py --technique_type openai --method search
```

## 数据质量保证

- ✅ 所有 JSON 格式验证通过
- ✅ 字段完整性检查通过
- ✅ 问答逻辑一致性验证
- ✅ 时间序列合理性检查
- ✅ 人物关系连贯性验证

## 注意事项

1. **API 密钥**: 需要在 `.env` 文件中设置 `OPENAI_API_KEY`
2. **依赖服务**: 运行 cortex-mem 需要启动 Qdrant 服务
3. **构建要求**: 需要构建 `cortex-mem-cli` 二进制文件
4. **网络要求**: 评估过程需要访问 OpenAI API

## 扩展建议

如需扩展数据集，可以考虑：
- 增加更多对话场景类型
- 添加更复杂的时间推理问题
- 包含更多样化的问答类别
- 增加多语言对话内容
- 添加对抗性问答样本

---

生成时间: 2025年12月21日
数据版本: v1.0
总对话数: 10 个
总问答数: 52 个 (原始格式 38 + RAG 格式 14)