# Cortex TARS

<p align="center">
  <strong>ğŸ§ åŸºäº Cortex Memory çš„äº¤äº’å¼ AI åŠ©æ‰‹ â€” ç»ˆç«¯ç”¨æˆ·ç•Œé¢ç‰ˆ</strong>
</p>

Cortex TARS æ˜¯ä¸€ä¸ªåŸºäº **Cortex Memory** çš„ç”Ÿäº§çº§ TUIï¼ˆç»ˆç«¯ç”¨æˆ·ç•Œé¢ï¼‰åº”ç”¨ã€‚å®ƒä¸ä»…æ˜¯ä¸€ä¸ªèŠå¤©æœºå™¨äººï¼Œæ›´æ˜¯ä¸€ä¸ªå…·å¤‡è¯­éŸ³è¾“å…¥å’ŒæŒä¹…è®°å¿†åŠŸèƒ½çš„æ™ºèƒ½ AI åŠ©æ‰‹å¹³å°ã€‚

## âœ¨ æ ¸å¿ƒç‰¹æ€§

### ğŸ¤– å¤š Agent ç®¡ç†
åˆ›å»ºå’Œç®¡ç†å¤šä¸ª AI æœºå™¨äººï¼Œæ¯ä¸ªæœºå™¨äººå…·æœ‰ç‹¬ç‰¹çš„ä¸ªæ€§ã€ç³»ç»Ÿæç¤ºè¯å’Œä¸“ä¸šçŸ¥è¯†é¢†åŸŸã€‚æ— è®ºæ˜¯ç¼–ç¨‹åŠ©æ‰‹ã€å†™ä½œä¼™ä¼´è¿˜æ˜¯ç”Ÿäº§åŠ›æ•™ç»ƒï¼Œéƒ½å¯ä»¥åŒæ—¶è¿è¡Œã€‚

### ğŸ§  åˆ†å±‚è®°å¿†ç³»ç»Ÿ
- **L0 æ‘˜è¦å±‚**ï¼šå¿«é€Ÿåˆ¤æ–­è®°å¿†ç›¸å…³æ€§ï¼ˆ~100 tokensï¼‰
- **L1 æ¦‚è§ˆå±‚**ï¼šç†è§£æ ¸å¿ƒä¿¡æ¯ï¼ˆ~2000 tokensï¼‰
- **L2 å®Œæ•´å±‚**ï¼šè·å–å®Œæ•´å†…å®¹
- åŸºäº Qdrant å‘é‡æ•°æ®åº“çš„è¯­ä¹‰æœç´¢
- ç§Ÿæˆ·éš”ç¦»çš„è®°å¿†æ¶æ„

### ğŸ¤ è¯­éŸ³è¾“å…¥
- å®æ—¶éº¦å…‹é£éŸ³é¢‘æ•è·
- Whisper è¯­éŸ³è½¬å½•ï¼ˆä¸­è‹±æ–‡æ”¯æŒï¼‰
- éŸ³é¢‘å¢ç›Šå’Œé¢„å¤„ç†
- é™éŸ³æ£€æµ‹å’Œè¿‡æ»¤

### ğŸ¨ ç°ä»£ TUI ä½“éªŒ
- åŸºäº ratatui çš„ç²¾ç¾ç»ˆç«¯ç•Œé¢
- å¤šä¸ªé¢„è®¾ä¸»é¢˜ï¼ˆDefaultã€Darkã€Forestã€Oceanã€Sunsetï¼‰
- Markdown å®Œæ•´æ”¯æŒ
- AI å“åº”å®æ—¶æµå¼è¾“å‡º
- ä¼šè¯å¯¼å‡ºåˆ°å‰ªè´´æ¿

### ğŸ’¾ è®°å¿†æŒä¹…åŒ–
- é€€å‡ºæ—¶è‡ªåŠ¨æå–ä¼šè¯è®°å¿†
- æ”¯æŒå‘é‡æœç´¢å¢å¼ºæ¨¡å¼
- ç”¨æˆ·ä¿¡æ¯è‡ªåŠ¨æå–

## ğŸ“‹ å‰ç½®è¦æ±‚

- **Rust** 1.70+
- **Qdrant** å‘é‡æ•°æ®åº“ï¼ˆç”¨äºè®°å¿†åŠŸèƒ½ï¼‰
- **OpenAI å…¼å®¹**çš„ LLM API ç«¯ç‚¹
- **éº¦å…‹é£**ï¼ˆç”¨äºè¯­éŸ³è¾“å…¥åŠŸèƒ½ï¼‰

## ğŸš€ å®‰è£…

### å…‹éš†å¹¶æ„å»º

```bash
cd examples/cortex-mem-tars
cargo build --release
```

ç¼–è¯‘åçš„äºŒè¿›åˆ¶æ–‡ä»¶ä½äº `target/release/cortex-mem-tars`ã€‚

## âš™ï¸ é…ç½®

### 1. åˆ›å»ºé…ç½®æ–‡ä»¶

å¤åˆ¶ç¤ºä¾‹é…ç½®ï¼š

```bash
cp config.example.toml config.toml
```

### 2. ç¼–è¾‘é…ç½®

ç¼–è¾‘ `config.toml`ï¼š

```toml
[qdrant]
url = "http://localhost:6334"
collection_name = "cortex_mem"
embedding_dim = 1536
timeout_secs = 30

[llm]
api_base_url = "https://api.openai.com/v1"
api_key = "your-api-key-here"
model_efficient = "gpt-4o-mini"
temperature = 0.7
max_tokens = 2000

[embedding]
api_base_url = "https://api.openai.com/v1"
api_key = "your-api-key-here"
model_name = "text-embedding-3-small"
batch_size = 100

[server]
host = "localhost"
port = 8080
cors_origins = ["*"]

[cortex]
data_dir = "./data"
```

### 3. å¯åŠ¨ Qdrant

```bash
# ä½¿ç”¨ Docker
docker run -p 6334:6334 qdrant/qdrant
```

## ğŸ® ä½¿ç”¨æ–¹æ³•

### åŸºæœ¬å‘½ä»¤

```bash
# è¿è¡Œåº”ç”¨
cortex-mem-tars

# å¯ç”¨å¢å¼ºè®°å¿†ä¿å­˜åŠŸèƒ½ï¼ˆé€€å‡ºæ—¶è‡ªåŠ¨ä¿å­˜å¯¹è¯åˆ°è®°å¿†ç³»ç»Ÿï¼‰
cortex-mem-tars --enhance-memory-saver

# å¯ç”¨ Qdrant å‘é‡æœç´¢åŠŸèƒ½
cortex-mem-tars --enhance-vector-search
```

### é”®ç›˜å¿«æ·é”®

| æŒ‰é”® | åŠŸèƒ½ |
|------|------|
| `Enter` | å‘é€æ¶ˆæ¯ |
| `Shift+Enter` | è¾“å…¥æ¢è¡Œ |
| `Ctrl+C` | æ¸…ç©ºå½“å‰ä¼šè¯ |
| `Ctrl+D` | å¯¼å‡ºä¼šè¯åˆ°å‰ªè´´æ¿ |
| `Ctrl+H` | æ˜¾ç¤ºå¸®åŠ© |
| `Ctrl+T` | æ‰“å¼€ä¸»é¢˜é€‰æ‹©å™¨ |
| `Ctrl+B` | æ‰“å¼€æœºå™¨äººç®¡ç† |
| `Ctrl+A` | å¯ç”¨è¯­éŸ³è¾“å…¥ |
| `q` | é€€å‡ºåº”ç”¨ï¼ˆåœ¨æœºå™¨äººé€‰æ‹©ç•Œé¢ï¼‰ |
| `Esc` | å…³é—­å¼¹çª— / è¿”å›ä¸Šä¸€çŠ¶æ€ |

### æœºå™¨äººç®¡ç†

1. **åˆ›å»ºæ–°æœºå™¨äºº**ï¼šæŒ‰ `Ctrl+B` â†’ é€‰æ‹©"Create Bot"
2. **è®¾ç½®æœºå™¨äººå±æ€§**ï¼š
   - **Name**ï¼šæ˜¾ç¤ºåç§°
   - **System Prompt**ï¼šæœºå™¨äººä¸ªæ€§å’Œè¡Œä¸ºæŒ‡ä»¤
   - **Password**ï¼šå¯é€‰çš„è®¿é—®å¯†ç 
3. **ç¼–è¾‘/åˆ é™¤æœºå™¨äºº**ï¼šé€šè¿‡æœºå™¨äººç®¡ç†ç•Œé¢ç®¡ç†

æ¯ä¸ªæœºå™¨äººç»´æŠ¤ç‹¬ç«‹è®°å¿†ï¼Œç¡®ä¿çŸ¥è¯†å’Œä¸Šä¸‹æ–‡å®Œå…¨åˆ†ç¦»ã€‚

### å‘½ä»¤æ”¯æŒ

åœ¨èŠå¤©ç•Œé¢è¾“å…¥ä»¥ä¸‹å‘½ä»¤ï¼š

```
/help     - æ˜¾ç¤ºå¸®åŠ©ä¿¡æ¯
/theme    - åˆ‡æ¢ä¸»é¢˜
/clear    - æ¸…ç©ºä¼šè¯
/dump     - å¯¼å‡ºä¼šè¯åˆ°å‰ªè´´æ¿
```

## ğŸ—ï¸ é¡¹ç›®æ¶æ„

```
cortex-mem-tars/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ main.rs              # åº”ç”¨å…¥å£
â”‚   â”œâ”€â”€ app.rs               # æ ¸å¿ƒåº”ç”¨é€»è¾‘å’Œäº‹ä»¶å¤„ç†
â”‚   â”œâ”€â”€ agent.rs             # AI Agent ä¸ Cortex Memory é›†æˆ
â”‚   â”œâ”€â”€ config.rs            # é…ç½®ç®¡ç†å’Œæœºå™¨äººé…ç½®
â”‚   â”œâ”€â”€ infrastructure.rs   # åŸºç¡€è®¾æ–½ï¼ˆLLMã€å‘é‡å­˜å‚¨ï¼‰
â”‚   â”œâ”€â”€ ui.rs                # TUI ç•Œé¢å’Œæ¸²æŸ“
â”‚   â”œâ”€â”€ logger.rs            # æ—¥å¿—ç³»ç»Ÿ
â”‚   â”œâ”€â”€ audio_input.rs       # éº¦å…‹é£éŸ³é¢‘æ•è·
â”‚   â””â”€â”€ audio_transcription.rs # Whisper è¯­éŸ³è½¬å½•
â”œâ”€â”€ config.example.toml      # é…ç½®æ¨¡æ¿
â””â”€â”€ README.md
```

## ğŸ§  è®°å¿†ç³»ç»Ÿå·¥ä½œåŸç†

Cortex TARS åˆ©ç”¨ Cortex Memory çš„æ™ºèƒ½è®°å¿†ç³»ç»Ÿï¼š

1. **è‡ªåŠ¨æå–**ï¼šç³»ç»Ÿè‡ªåŠ¨ä»å¯¹è¯ä¸­æå–å…³é”®äº‹å®å’Œæ´å¯Ÿ
2. **è¯­ä¹‰å­˜å‚¨**ï¼šè®°å¿†ä»¥å‘é‡å½¢å¼å­˜å‚¨ï¼Œæ”¯æŒæ™ºèƒ½æ£€ç´¢
3. **ä¸Šä¸‹æ–‡æ„ŸçŸ¥**ï¼šAgent åœ¨ç”Ÿæˆå“åº”å‰æ£€ç´¢ç›¸å…³è®°å¿†
4. **è®°å¿†ä¼˜åŒ–**ï¼šå®šæœŸä¼˜åŒ–æ•´åˆè®°å¿†
5. **Agent éš”ç¦»**ï¼šæ¯ä¸ª Agent çš„è®°å¿†å®Œå…¨åˆ†ç¦»

### è®°å¿† URI æ ¼å¼

```
cortex://user/{user_id}/          - ç”¨æˆ·è®°å¿†ç›®å½•
cortex://user/{user_id}/profile.json - ç”¨æˆ·æ¡£æ¡ˆ
cortex://agent/{agent_id}/       - Agent è®°å¿†ç›®å½•
cortex://session/{session_id}/   - ç‰¹å®šä¼šè¯
cortex://resources/               - çŸ¥è¯†åº“
```

### åˆ†å±‚è®¿é—®

- **search(query)**ï¼šæ™ºèƒ½æœç´¢è®°å¿†ï¼Œæ”¯æŒæŒ‡å®šæœç´¢èŒƒå›´å’Œå±‚çº§
- **abstract(uri)**ï¼šè·å– L0 æ‘˜è¦ï¼ˆå¿«é€Ÿåˆ¤æ–­ç›¸å…³æ€§ï¼‰
- **overview(uri)**ï¼šè·å– L1 æ¦‚è§ˆï¼ˆç†è§£æ ¸å¿ƒä¿¡æ¯ï¼‰
- **read(uri)**ï¼šè·å– L2 å®Œæ•´å†…å®¹
- **ls(uri)**ï¼šåˆ—å‡ºç›®å½•å†…å®¹

## ğŸ”§ å¼€å‘ç›¸å…³

### è¿è¡Œæµ‹è¯•

```bash
cargo test
```

### ä»£ç æ£€æŸ¥

```bash
cargo check
```

### ä»£ç æ ¼å¼åŒ–

```bash
cargo fmt
```

### å‘å¸ƒæ„å»º

```bash
cargo build --release
```

## ğŸ› æ•…éšœæ’é™¤

### Qdrant è¿æ¥é—®é¢˜

éªŒè¯ Qdrant æ˜¯å¦è¿è¡Œï¼š

```bash
curl http://localhost:6334/health
```

æ£€æŸ¥ `config.toml` ä¸­çš„ Qdrant URL é…ç½®ã€‚

### LLM API é”™è¯¯

- éªŒè¯ API å¯†é’¥æ­£ç¡®
- æ£€æŸ¥ API ç«¯ç‚¹ URL
- ç¡®ä¿ API é…é¢å……è¶³
- æŸ¥çœ‹æ—¥å¿—è·å–è¯¦ç»†é”™è¯¯ä¿¡æ¯

### è®°å¿†åŠŸèƒ½ä¸å·¥ä½œ

- ç¡®ä¿ Qdrant æ­£å¸¸è¿è¡Œ
- éªŒè¯ LLM å’Œ embedding æœåŠ¡çš„ API å¯†é’¥
- æ£€æŸ¥è®°å¿†é…ç½®é˜ˆå€¼
- å¯ç”¨æ—¥å¿—æŸ¥çœ‹è¯¦ç»†è¯Šæ–­

### è¯­éŸ³è¾“å…¥é—®é¢˜

- æ£€æŸ¥éº¦å…‹é£æƒé™
- ç¡®è®¤éŸ³é¢‘è®¾å¤‡å¯ç”¨
- æŸ¥çœ‹æ—¥å¿—ä¸­çš„éŸ³é¢‘é…ç½®ä¿¡æ¯

## ğŸ“š ç›¸å…³èµ„æº

- [Cortex Memory æ–‡æ¡£](https://github.com/sopaco/cortex-mem/tree/main/litho.docs)
- [Cortex Memory Core](../../cortex-mem-core)
- [Cortex Memory Tools](../../cortex-mem-tools)
- [RatATUI æ¡†æ¶](https://github.com/ratatui-org/ratatui)
- [Rig Agent æ¡†æ¶](https://github.com/0xPlaygrounds/rig)
- [Qdrant å‘é‡æ•°æ®åº“](https://qdrant.tech/)

## ğŸ“„ è®¸å¯è¯

MIT è®¸å¯è¯ - è¯¦è§ [LICENSE](../../LICENSE)ã€‚

## ğŸ™ è‡´è°¢

- **Cortex Memory**ï¼šä¸º AI æä¾›æŒä¹…è®°å¿†çš„æ™ºèƒ½æ¡†æ¶
- **RatATUI**ï¼šç²¾ç¾çš„ç»ˆç«¯ UI æ¡†æ¶
- **Rig**ï¼šç”¨äºæ„å»ºæ™ºèƒ½ç³»ç»Ÿçš„ LLM Agent æ¡†æ¶
- **Qdrant**ï¼šç”¨äºè¯­ä¹‰æœç´¢çš„é«˜æ€§èƒ½å‘é‡æ•°æ®åº“
- **whisper-rs**ï¼šRust å®ç°çš„ Whisper è¯­éŸ³è¯†åˆ«

---

**Cortex TARS** â€” è®© AI åœ¨ç»ˆç«¯ä¸­æ‹¥æœ‰æŒä¹…è®°å¿†ã€‚ğŸš€